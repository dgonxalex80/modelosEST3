<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Modelos Estadísticos para la toma de decisiones" />


<title> Código R -Tutorial 301</title>

<script src="site_libs/header-attrs-2.21/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Modelos Estadísticos para la toma de decisiones</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Conceptos 
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso100.html">Conceptos básicos</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    MDE
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso200.html">Modelo de Diseño de Experimentos </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    ML
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso300.html">Introducción</a>
    </li>
    <li>
      <a href="recurso310.html">Modelo</a>
    </li>
    <li>
      <a href="recurso320.html">Estimación</a>
    </li>
    <li>
      <a href="recurso330.html">Evaluación</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    ACP
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso600.html">Análisis de Componentes Principales</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    AC
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso500.html">Análisis de conglomerados</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutoriales
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso700.html">Tutorial 301</a>
    </li>
    <li>
      <a href="recurso701.html">Tutorial 302</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore"><span style="color:#034a94"> <strong>Código
R -Tutorial 301</strong></span></h1>
<h4 class="author">Modelos Estadísticos para la toma de decisiones</h4>

</div>


<p><br/><br/></p>
<p>A continuación se presentan los problemas relacionados en los
tutoriales 301 que en algunos casos han presentado problemas en el
momento de su instalación</p>
<div id="paquetes-requeridos" class="section level3">
<h3><strong>paquetes requeridos</strong></h3>
<pre>
library(learnr)
library(paqueteMOD)
library(boot)
library(ggplot2)
library(gridExtra)
library(knitr)
library(broom)
library(stargazer)
</pre>
<p></br></br></p>
</div>
<div id="presentación" class="section level2">
<h2><strong>PRESENTACIÓN</strong></h2>
<p></br></p>
<p><img src="img/banner2.png" width="100%" style="display: block; margin: auto;" /></p>
<p></br></br></p>
<p>El presente tutorial contiene preguntas relacionadas con el Análisis
de Componentes Principales (<strong>ACP</strong> o <strong>PCA</strong>)
y el Análisis de Custer o de Conglomerados (<strong>AC</strong>) sus
supuestos, conceptos más importantes.</p>
<p></br></br></p>
<div id="conceptos" class="section level4">
<h4><strong>CONCEPTOS</strong></h4>
<p></br></br></p>
</div>
<div id="análisis-de-componentes-principales" class="section level4">
<h4><strong>Análisis de Componentes Principales</strong></h4>
<p></br></p>
<p><strong>Componentes principales</strong></p>
<p>Corresponde a combinaciones lineales de las variables originales que
representan la mayor parte de la variación en los datos. El
<strong>primer componente principal</strong> (<span
class="math inline">\(CP_1\)</span>) explica la mayor cantidad de
variación posible, y los siguientes componentes principales explican la
mayor cantidad de variación restante.</p>
<p></br></p>
<p><strong>Varianza</strong></p>
<p>Es una medida de la cantidad de variación que contienen los datos. El
<strong>ACP</strong>, buscando capturar la mayor cantidad de esta
varianza mediante los componentes principales que maximizan la
varianza.</p>
<p></br></p>
<p><strong>Autovectores y autovalores</strong></p>
<p>Corresponde a valores matemáticos que son utilizados para el cálculo
los componentes principales. Los autovectores son vectores que no
cambian de dirección cuando se transforman por una matriz dada, mientras
que los autovalores son escalares que indican la magnitud de la
transformación.</p>
<p></br></p>
<p><strong>Reducción de la dimensionalidad</strong>:</p>
<p>Es el proceso de transformar un conjunto de datos multivariables en
un conjunto de datos de menor dimensión, por lo general 2 o 3 que
permiten realizar una analisis vusual (2D y 3D), mediante la selección
de los componentes principales más importantes.</p>
<p></br></br></p>
</div>
<div id="análisis-de-cluster" class="section level4">
<h4><strong>Análisis de Cluster </strong></h4>
<p></br></p>
<p><strong>Similaridad</strong></p>
<p>Es un indicador que mide que tan parecidos son dos objetos en en
términos de sus características o atributos.</p>
<p></br></p>
<p><strong>Distancia</strong></p>
<p>Es un indicador que valora la separación que hay entre dos objetos en
función de sus características. Estos indicadores se utilizan para
determinar la construcción de los grupos. Entre los indicadores de
distancia estan:</p>
<ul>
<li>Distancia euclidiana (distancia más utilizada - algoritmo
k-medias)</li>
<li>Distancia de Manhattan</li>
<li>Distancia de Chebyshev</li>
<li>Distancia de Minkowski</li>
<li>Distancia de correlación son tan importantes como las relaciones
entre ellas.</li>
</ul>
<p></br></p>
<p><strong>Métodos de agrupamiento</strong></p>
<p>Métodos para agrupar los objetos.</p>
<ul>
<li>métodos jerárquicos</li>
<li>métodos no jerárquicos.</li>
</ul>
<p></br></p>
<p><strong>Función objetivo</strong></p>
<p>Corresponde a una función que se utiliza para determinar el número
óptimo de clústeres y para evaluar la calidad de los clústeres.</p>
<p></br></p>
<p><strong>Validación de clústeres</strong></p>
<p>La validación de clústeres se utiliza para determinar si los
clústeres son significativos y útiles.</p>
<p></br></br></br></p>
</div>
</div>
<div id="problemas" class="section level2">
<h2><strong>PROBLEMAS</strong></h2>
<p></br></p>
<div id="problema-1" class="section level3">
<h3><span style="color:#FF7F00"><strong>Problema 1</strong></span></h3>
<p>La base <code>beer2</code> contenida en <code>paqueteMOD</code>
contiene las siguientes características de un conjunto de 69 marcas
diferentes de cervezas:</p>
<ul>
<li><strong>precio</strong> : precio por unidad de 12 oz</li>
<li><strong>calorias</strong> : cantidad de calorías por unidad de 12
oz</li>
<li><strong>poralcoh</strong> : porcentaje de alcohol por unidad de 12
oz</li>
</ul>
<p>Reduzca el número de variables utilizando Componentes Principales</p>
<p><strong>Nota</strong>: En ocasiones es posible darle nombre a cada
uno de los componentes observando los pesos de las variables en sus
respectivos componentes principales. En este caso se espera que uno de
los componentes resuma las variables relacionadas con las
características de composición de la cerveza y que el precio quede
separado en un segundo componente. Valide estos resultados
esperados.</p>
<pre class="r"><code>library(paqueteMOD)
data(&quot;beer&quot;)
ACP = prcomp(beer2, center=TRUE, scale=TRUE)
summary(ACP)</code></pre>
<pre><code>## Importance of components:
##                          PC1    PC2     PC3
## Standard deviation     1.454 0.8824 0.32606
## Proportion of Variance 0.705 0.2595 0.03544
## Cumulative Proportion  0.705 0.9646 1.00000</code></pre>
<pre class="r"><code># se puede observar que entre los dos primeros componentes se concentra el 96% de la variacion de la data</code></pre>
</div>
<div id="problema-2" class="section level3">
<h3><span style="color:#FF7F00"><strong>Problema 2</strong></span></h3>
<p>La base <code>beer2</code> contenida en <code>paqueteMOD</code>
contiene las siguientes características de un conjunto de 69 marcas
diferentes de cervezas:</p>
<ul>
<li><strong>precio</strong> : precio por unidad de 12 oz</li>
<li><strong>calorias</strong> : cantidad de calorías por unidad de 12
oz</li>
<li><strong>poralcoh</strong> : porcentaje de alcohol por unidad de 12
oz</li>
<li><strong>tipo</strong> : 1-lager artesanal, 2-clara artesanal,
3-lager importada, 4-cerveza normal y helada, y 5-cerveza baja en
calorías y sin alcohol</li>
<li><strong>origen</strong> : 0-nacional, 1- importada.</li>
</ul>
<p>Al extraer los componentes principales de una base de datos permite
además de encontrar nuevas variables llamadas componentes, contar con
gráficos que permiten visualizar la relación que existe entre las
variables, para ello se requiere construir el circulo de correlaciones
(representación de variables)</p>
<p>Construya el gráfico de varibles y confirme las relaciones entre las
variables descritas en las composiciones de los dos componentes
principales resultantes :</p>
<pre class="r"><code>library(paqueteMOD)
data(&quot;beer&quot;)
ACP = prcomp(beer2, center=TRUE, scale=TRUE)
plot(ACP$x[,1], ACP$x[,2], 
     xlab = paste0(&quot;CP_1 (&quot;, round(summary(ACP)$importance[2,1]*100,1), &quot;%)&quot;), 
     ylab = paste0(&quot;CP_2 (&quot;, round(summary(ACP)$importance[2,2]*100,1), &quot;%)&quot;),
     main = &quot;Gráfico de Análisis de Componetes Principales&quot;)</code></pre>
<p><img src="recurso710_files/figure-html/p2-1.png" width="672" /></p>
<p></br></br></p>
</div>
<div id="problema-3" class="section level3">
<h3><span style="color:#FF7F00"><strong>Problema 3</strong></span></h3>
<p>La base <code>beer</code> contenida en <code>paqueteMOD</code>
contiene las siguientes características de un conjunto de 69 marcas
diferentes de cervezas:</p>
<ul>
<li><strong>precio</strong> : precio por unidad de 12 oz</li>
<li><strong>calorias</strong> : cantidad de calorías por unidad de 12
oz</li>
<li><strong>poralcoh</strong> : porcentaje de alcohol por unidad de 12
oz</li>
<li><strong>tipo</strong> : 1-lager artesanal, 2-clara artesanal,
3-lager importada, 4-cerveza normal y helada, y 5-cerveza baja en
calorías y sin alcohol</li>
<li><strong>origen</strong> : 0-nacional, 1- importada.</li>
</ul>
<p>Al realizar una análisis de componentes principales sobre una base de
datos es posible representar tanto los individuos como las variables en
un solo gráfico, permitiendo observar las relaciones entre variables e
individuos</p>
<p>Muestre la representación simultanea de individuos y variables en el
primer plano factorial</p>
<pre class="r"><code>library(paqueteMOD)
data(&quot;beer&quot;)
ACP = prcomp(beer[,2:4], center=TRUE, scale=TRUE)
biplot(ACP, cex=0.7)</code></pre>
<p><img src="recurso710_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code># además de la relación entre las variables, visualiza que unas marcas están  en los ejes positivos  mientras otras se alejan</code></pre>
<p></br></br></p>
</div>
<div id="problema-3-1" class="section level3">
<h3><span style="color:#FF7F00"><strong>Problema 3</strong></span></h3>
<p>La base <code>beer</code> contenida en <code>paqueteMOD</code>
contiene las siguientes características de un conjunto de 69 marcas
diferentes de cervezas:</p>
<ul>
<li><strong>precio</strong> : precio por unidad de 12 oz</li>
<li><strong>calorias</strong> : cantidad de calorías por unidad de 12
oz</li>
<li><strong>poralcoh</strong> : porcentaje de alcohol por unidad de 12
oz</li>
<li><strong>tipo</strong> : 1-lager artesanal, 2-clara artesanal,
3-lager importada, 4-cerveza normal y helada, y 5-cerveza baja en
calorías y sin alcohol</li>
<li><strong>origen</strong> : 0-nacional, 1- importada.</li>
</ul>
<p>Ahora se plantea realizar un Análisis de Conglomerados permita
clasificar las cervezas en grupos, utilizando para ellos medidas
denominadas de disimilaridad dentro de las cuales se destaca la
distancia euclidiana y ténico o procedimientos como el método del vecino
más cercano.</p>
<p>Use la función <code>kmeans</code> contenida en el paquete `` para
encontrar análisis de conglomerados optimo mediante kmeans,</p>
<pre class="r"><code>library(paqueteMOD)
data(&quot;beer&quot;)
# se prepara la data
M=beer[,2:4]
d &lt;- dist(M, method = &quot;euclidean&quot;) # Calculamos la matriz de distancia
hc &lt;- hclust(d, method = &quot;ward.D2&quot;) # Realizamos la clusterización
# Visualizamos los resultados en un dendrograma
plot(as.dendrogram(hc),horiz=TRUE , main = &quot;Dendrograma de Cervezas&quot;)</code></pre>
<p><img src="recurso710_files/figure-html/p5-solution-1.png" width="672" /></p>
<pre class="r"><code># </code></pre>
<p></br></br></p>
</div>
<div id="problema-4" class="section level3">
<h3><span style="color:#FF7F00"><strong>Problema 4</strong></span></h3>
<p>La base de datos <code>animals</code> de <code>paqueteMOD</code>
contiene la composición de la leche de 25 especies de animales :</p>
<ul>
<li><strong>water</strong>: porcentaje de agua.</li>
<li><strong>protein</strong>: porcentaje de proteína.</li>
<li><strong>fat</strong>: porcentaje de grasa.</li>
<li><strong>lactose</strong>: porcentaje de lactosa.</li>
<li><strong>ash</strong>: porcentaje de cenizas.</li>
</ul>
<p>El análisis de conglomerados permite clasificar las observaciones en
grupos, utilizando para ellos medidas denominadas de disimilaridad
dentro de las cuales se destaca la distancia euclidiana y ténico o
procedimientos como el método del vecino más cercano.</p>
<p>Use la función <code>kmeans</code> contenida en el paquete `` para
encontrar análisis de conglomerados optimo mediante kmeans,</p>
<p><strong>Nota</strong> : Esta función se tiene el argumento
<code>centers</code> el cual es el numero optimo de grupos que encontró
anteriormente</p>
<p>Calcule el dendograma del conjunto de datos, primero calcule las
distancias euclidianas mediante la función <code>dist</code> y despues
el dendograma con la función <code>hclust</code></p>
<pre class="r"><code>library(paqueteMOD)
data(&quot;animals&quot;)
# se prepara la data
d &lt;- dist(animals, method = &quot;euclidean&quot;) # Calculamos la matriz de distancia
hc &lt;- hclust(d, method = &quot;ward.D2&quot;) # Realizamos la clusterización
# Visualizamos los resultados en un dendrograma
plot(as.dendrogram(hc),horiz=TRUE , main = &quot;Dendrograma de Animales&quot;)</code></pre>
<p><img src="recurso710_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
